<!DOCTYPE html>
<html lang="en">

<head>
    <title>PTCG-sim | Pok√©mon TCG Tabletop Simulator</title>
    
    <!-- Updated Content Security Policy -->
    <meta http-equiv="Content-Security-Policy" 
          content="script-src 'self' https://cdn.socket.io; object-src 'none';">

    <meta name="description"
          content="PTCG-sim is an open-source Pok√©mon Trading Card Game (Pok√©mon TCG) tabletop simulator supporting single player and online multiplayer. Simulate your favorite card game!">
    <meta name="keywords"
          content="ptcg sim,ptcg,pokemon trading card game simulator,pokemon trading card game sim,pokemon tcg simulator,pokemon tcg sim,pokemon sim,pokemon simulator,pokemon card simulator,pokemon card sim,pokemon tabletop simulator,pokemon tabletop sim,pokemon,pokemon card,pokemonsim,pokemon game sim,ptcg os,pokemon open source" />
    <meta charset="UTF-8">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta http-equiv="Content-Language" content="en">
    <meta property="og:title" content="Pok√©mon TCG Tabletop Simulator | PTCG-sim" />
    <meta property="og:type" content="website" />
    <meta property="og:image" content="https://ptcg-sim-meta.vercel.app/src/assets/blank-logo.png" />
    <meta property="og:url" content="https://ptcg-sim-meta.vercel.app/" />
    <meta property="og:description"
          content="PTCG-sim is an open-source Pok√©mon Trading Card Game (Pok√©mon TCG) tabletop simulator supporting single player and online multiplayer. Simulate your favorite card game!">
    <meta property="og:site_name" content="PTCG-sim">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <link rel="icon" href="/src/assets/favicon.ico" type="image/x-icon">
    <link rel="stylesheet" href="/src/css/index.css">
    
    <!-- Load Socket.IO Library -->
    <script src="https://cdn.socket.io/4.7.4/socket.io.min.js"></script>

    <!-- Load App Scripts -->
    <script type="module" src="src/init.js" defer></script>
    <script type="module" src="src/front-end.js" defer></script>
</head>

<body>
    <div id="importDataJSON" style="display: none;"><%- JSON.stringify(importDataJSON || {}) %></div>
    <div id="cover"></div>
    <iframe id="selfContainer" class="self" src="./self-containers.html"></iframe>
    <iframe id="oppContainer" class="opp" src="./opp-containers.html"></iframe>
    <div id="stadium" class="outline"></div>

    <div id="selfResizer" class="self-color"></div>
    <div id="oppResizer" class="opp-color"></div>

    <div id="boardButtonContainer">
        <div class="tooltip" id="turnButton">
            <button>+Turn</button>
            <span class="tooltiptext">Start turn</span>
        </div>
        <div class="tooltip" id="flipCoinButton">
            <button>Coin</button>
            <span class="tooltiptext">Flip coin</span>
        </div>
        <div class="tooltip" id="flipBoardButton">
            <button>‚áÖ</button>
            <span class="tooltiptext">Flip board</span>
        </div>
        <div class="tooltip" id="refreshButton">
            <button>
                <div id="refreshIcon">‚Üª</div>
                <div id="loadingCircle"></div>
            </button>
            <span class="tooltiptext">Refresh images</span>
        </div>
    </div>

    <div id="topButtonContainer">
        <button id="p1Button" class="selected-page">1P</button>
        <button id="p2Button" class="not-selected-page">2P</button>
        <button id="deckImportButton" class="not-selected-page">Import</button>
        <button id="settingsButton" class="not-selected-page">Settings</button>
    </div>
    <div id="greyFiller"></div>

    <div id="p1Box" class="sidebox">
        <div id="chatbox"><strong>Welcome to PTCG-sim!</strong>
            <p><strong id="changelogLink"
                    style="cursor: pointer; text-decoration: none; color: #ffcc00; border-bottom: 1px solid #ffcc00;">v1.5.1
                    œû(‡πë‚öà ‚Ä§Ã´ ‚öà‡πë)‚ãÜ </strong></p>
            <p style="font-size: 90%;">PTCG-sim is an <a href="https://github.com/xxmichaellong/ptcg-sim"
                    target="_blank">open-source</a> Pok√©mon Trading Card Game (Pok√©mon TCG) tabletop simulator. It
                supports single player and online multiplayer.</p>
            <p style="font-size: 90%;">Use the <strong>Import</strong> tab above to import your deck, then press
                <strong>Set Up</strong> to start a game.</p>
            <p style="font-size: 90%;">Drag or use keybinds (hold <span class="shift-font">shift</span>) to move cards.
            </p>
            <p style="font-size: 90%;">See the <strong>Options</strong> button below to import, export, and replay
                games.</p>
            <p style="font-size: 90%;">Happy testing!</p>
            <button id="tutorialButton">Watch Tutorial</button>
            <br><br>
            <div id="links">
                <div id="discordLink"><strong><a href="https://discord.gg/jMfhQa38mh" target="_blank">üéÆ Join our
                            Discord</a></strong></div>
                <div id="donationsLink">üéÅ Sponsors & Donations</div>
            </div>
            <div id="line"></div>
        </div>
        <div id="chatboxButtonContainer" class="chat-button-container">
            <button id="attackButton" class="self-color">Attack</button>
            <button id="passButton" class="self-color">Pass</button>
            <button id="undoButton" class="self-color">Undo</button>
            <button id="FREEBUTTON" class="self-color">‚ö°</button>
        </div>
        <input id="messageInput" type="text" placeholder="Type your message here...">
        <div id="bottomP1ButtonContainer" class="sidebox-button-container">
            <button id="setupButton" class="self-color">Set Up</button>
            <button id="resetButton" class="self-color">Reset</button>
            <button id="setupBothButton" class="neutral-color">Set Up Both</button>
            <button id="resetBothButton" class="neutral-color">Reset Both</button>
            <button id="optionsButton" class="neutral-color">Options</button>
        </div>
    </div>
    
    <div id="p2Box" class="sidebox">
        <div id="p2ExplanationBox">
            <strong>Online Multiplayer Mode</strong>
            <br><br>
            Enter or generate a unique room ID to share with your friends. Players must enter the same ID
            (case-sensitive) to join.
        </div>
        <div id="lobby">
            <input id="nameInput" type="text" placeholder="Name">
            <div id="roomId">
                <input id="roomIdInput" type="text" placeholder="Room ID">
                <button id="copyButton">
                    <img src="https://www.svgrepo.com/show/309480/copy.svg" alt="Copy">
                </button>
                <button id="generateIdButton">Generate</button>
            </div>
            <div id="coachingModeLabel">
                <input type="checkbox" id="coachingModeCheckbox">
                <label style="cursor: pointer;" for="coachingModeCheckbox">Enable board flip <span
                        style="font-style: italic; font-size: smaller;">(both players must enable)</span></label>
            </div>
            <div id="spectatorModeLabel">
                <input type="checkbox" id="spectatorModeCheckbox">
                <label style="cursor: pointer;" for="spectatorModeCheckbox">Join as spectator</label>
            </div>
            <div id="joinRoomButton"> Join Room </div>
        </div>
        <div id="connectedRoom">
            <div id="roomHeader">
                <div id="roomHeaderText"></div>
                <button id="roomHeaderCopyButton">
                    <img src="https://www.svgrepo.com/show/309480/copy.svg" alt="Copy">
                </button>
            </div><div id="p2Chatbox"></div>
            <div id="p2ChatboxButtonContainer" class="chat-button-container">
                <button id="p2AttackButton" class="self-color">Attack</button>
                <button id="p2PassButton" class="self-color">Pass</button>
                <button id="p2FREEBUTTON" class="self-color">‚ö°</button>
            </div>
            <input id="p2MessageInput" type="text" placeholder="Type your message here...">
            <div id="p2BottomButtonContainer" class="sidebox-button-container">
                <button id="p2SetupButton" class="self-color">Set Up</button>
                <button id="p2ResetButton" class="self-color">Reset</button>
                <button id="leaveRoomButton" class="neutral-color">Leave Room</button>
                <button id="p2OptionsButton" class="neutral-color">Options</button>
            </div>
        </div>
    </div>

    <div id="deckImport" class="sidebox">
        <div>
            <button id="deckBuilderButton">Deck Builder</button>
            <button id="importExportGameStateButton">Import/Export Game</button>
        </div>
        <div id="importButtonContainer">
            <button id="mainImportHeaderButton" class="main-select">Main</button>
            <button id="altImportHeaderButton">Alt (1P only)</button>
        </div>
        <textarea id="mainDeckImportInput" spellcheck="false"></textarea>
        <textarea id="altDeckImportInput" spellcheck="false"></textarea>
        <div id="importBottom">
            <button id="decklistsButton">üìñ</button>
            <button id="importButton">Import</button>
            <button id="confirmButton">Confirm</button>
            <button id="cancelButton">Cancel</button>
            <button id="saveButton" class="neutral-color">Save</button>
            <div id="decklistsContextMenu" class="decklists-context-menu"></div>
            <button id="randomButton">ü™Ñ</button>
            <div id="successText">Success!</div>
            <div id="failedText">Error!</div>
            <div id="loadingText">Loading...</div>
            <div id="invalidText">Not allowed!</div>
        </div>
        <div id="uploadButtonsContainer">
            <label for="csvFile" id="uploadFileButton" class="self-color">Upload File</label>
            <input type="file" id="csvFile" accept=".csv" style="display:none;">
            <button id="changeCardBackButton" class="self-color">Change Card Back</button>
            <div class="language-container">
                <button id="changeLanguageButton" class="neutral-color">Language: English</button>
                <div id="languageDropdown">
                    <ul>
                        <li>English</li>
                        <li>French</li>
                        <li>German</li>
                        <li>Italian</li>
                        <li>Portuguese</li>
                        <li>Spanish</li>
                    </ul>
                </div>
            </div>
        </div>
        <button id="saveCurrentButton" class="self-color">Save Current Deck</button>
    </div>

    <div id="settings" class="sidebox">
        <div id="settingsToggles">
            <div>
                <input type="checkbox" id="darkModeCheckbox">
                <label for="darkModeCheckbox">Dark mode</label>
            </div>
            <div>
                <input type="checkbox" id="showZonesCheckbox">
                <label for="showZonesCheckbox">Hide containers</label>
            </div>
            <div>
                <input type="checkbox" id="hideHandCheckbox">
                <label for="hideHandCheckbox">Hide opponent's hand (1P mode)</label>
            </div>
        </div>
        <button id="changeBackgroundButton" class="neutral-color">Change background</button>
        <br>
        <div id="keybindReminder">
            Hold (<span class="shift-font">shift</span>) to view keybinds
        </div>
        <div id="twitterDescription">
            <div>Please reach out if you have any questions, suggestions, bugs etc.!</div>
            <a href="https://twitter.com/xxmichaellong" target="_blank" rel="noopener noreferrer">
                <div id="twitterHandle">
                    <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/6/6f/Logoof_Twitter.svg/512px-Logo_of_Twitter.svg.png">
                    <span id="username">@xxmichaellong</span>
                </div>
            </a>
        </div>
    </div>

    <div id="cardContextMenu" class="card-context-menu">
        <ul>
            <li id="abilityCounterButton">Toggle ability/effect</li>
            <li id="damageCounterButton">Damage counter</li>
            <li id="specialConditionButton">Special condition</li>

            <li id="prizesHeader">Prizes</li>
            <li id="shufflePrizesButton">Shuffle prizes</li>
            <li id="revealHidePrizesButton">Reveal/hide prizes</li>
            <li id="lookPrizesButton">Look/cover prizes</li>

            <li id="handHeader">Hand</li>
            <li id="discardHandButton">Discard hand</li>
            <li id="shuffleHandButton">Shuffle hand into deck</li>
            <li id="shuffleHandBottomButton">Shuffle hand to bottom</li>
            <li id="lookHandButton">Look/cover hand</li>
            <li id="randomHandButton">Pick random card</li>

            <li id="deckHeader">Deck</li>
            <li id="shuffleDeckButton">Shuffle deck</li>
            <li id="drawButton">Draw card(s)</li>
            <li id="viewTopButton">View top card(s)</li>
            <li id="viewBottomButton">View bottom card(s)</li>

            <li id="boardHeader">Playboard</li>
            <li id="discardBoardButton">Discard all</li>
            <li id="handBoardButton">Move all to hand</li>
            <li id="shuffleBoardButton">Shuffle all into deck</li>
            <li id="lostZoneBoardButton">Lost Zone all</li>

            <li id="moveButton">Move card...
                <ul class="card-sub-menu">
                    <li id="moveToBoardButton">to Board</li>
                    <li id="moveToTopButton">to Deck (top)</li>
                    <li id="moveToBottomButton">to Deck (bottom)</li>
                    <li id="switchWithTopButton">to Deck (switch)</li>
                    <li id="shuffleIntoDeckButton">to Deck (shuffle)</li>
                </ul>
            </li>
            <li id="revealHideButton">Reveal/hide card</li>
            <li id="changeButton">Change type...
                <ul class="card-sub-menu">
                    <li id="changeToEnergyButton">to Energy</li>
                    <li id="changeToToolButton">to Tool</li>
                    <li id="changeToPok√©monButton">to Pok√©mon</li>
                </ul>
            </li>
        </ul>
    </div>

    <div id="optionsContextMenu">
        <div id="exitReplay" style="display:none">Exit replay mode</div>
        <div id="jsonReplayDiv"><label for="jsonReplay" id="importReplay" style="cursor: pointer;">Enter replay
                mode</label>
            <input type="file" id="jsonReplay" accept=".json" style="display:none;" />
        </div>
        <div id="jsonDiv"><label for="jsonFile" id="importState" style="cursor: pointer;">Import game state</label>
            <input type="file" id="jsonFile" accept=".json" style="display:none;" />
        </div>
        <div id="exportState">Export game state</div>
        <div id="exportLog">Export battle log</div>
        <div id="clearLog">Clear battle log</div>
        <div id="fullscreenButton">Full screen</div>
    </div>

    <div id="keybindModal">
        <div class="keybind-section-container">
            <div class="keybind-section">
                <div class="keybind-column">
                    <h1>Move card...</h1>
                    <ul>
                        <li>to Hand <code>[h]</code></li>
                        <li>to Discard <code>[d]</code></li>
                        <li>to Bench <code>[b]</code></li>
                        <li>to Active <code>[a]</code></li>
                        <li>to Stadium <code>[g]</code></li>
                        <li>to Lost Zone <code>[l]</code></li>
                        <li>to Prizes <code>[p]</code></li>
                        <li>to Board <code>[space]</code></li>
                        <li>to Deck (top) <code>[‚Üë]</code></li>
                        <li>to Deck (bottom) <code>[‚Üì]</code></li>
                        <li>to Deck (switch) <code>[‚Üí]</code></li>
                        <li>to Deck (shuffle)<code>[s]</code></li>
                    </ul>
                </div>
                <div class="keybind-column">
                    <h1>Deck</h1>
                    <ul>
                        <li>Shuffle deck<code>[s]</code></li>
                        <li>Draw card(s)<code>[1-9]</code></li>
                        <li>View top card(s)<code>[alt + 1-9]</code></li>
                        <li>View bottom card(s)<code>[ctrl + 1-9]</code></li>
                        <li>View <code>[v]</code></li>
                    </ul>
                </div>
                <div class="keybind-column">
                    <h1>Hand</h1>
                    <ul>
                        <li>Discard hand<code>[alt + d]</code></li>
                        <li>Shuffle hand into deck <code>[alt + s]</code></li>
                        <li>Shuffle hand to bottom <code>[alt + ‚Üì]</code></li>
                    </ul>
                </div>
                <div class="keybind-column">
                    <h1>Playboard</h1>
                    <ul>
                        <li>Discard all<code>[enter]</code></li>
                        <li>Move all to hand<code>[alt + enter]</code></li>
                        <li>Shuffle all into deck<code>[/]</code></li>
                    </ul>
                </div>
            </div>
            <div class="keybind-section">
                <div class="keybind-column">
                    <h1>Card actions</h1>
                    <ul>
                        <li>Attach <code>[q]</code></li>
                        <li>Evolve <code>[e]</code></li>
                        <li>View (for cards in play, press twice) <code>[v]</code></li>
                        <li>Toggle ability/effect<code>[w]</code></li>
                        <li>Damage counter</li>
                        <ul>
                            <li>Increase <code>[1-9]</code></li>
                            <li>Decrease <code>[alt + 1-9]</code></li>
                            <li>Remove <code>[0]</code></li>
                        </ul>
                        <li>Special condition</li>
                        <ul>
                            <li>Add/Toggle <code>[y]</code></li>
                            <li>Remove <code>[alt + y]</code></li>
                        </ul>
                        <li>Rotate card(s)<code>[r]</code></li>
                        <li>Rotate BREAK <code>[alt + r]</code></li>
                        <li>Look/cover card (only yourself)<code>[c]</code></li>
                        <li>Hide card (both players)<code>[z]</code></li>
                        <li>Reveal card (both players)<code>[alt + z]</code></li>
                        <li>Put face-down card in active<code>[z] ‚Üí [a]</code></li>
                        <li>Change type...</li>
                        <ul>
                            <li>to Tool <code>[alt + t]</code></li>
                            <li>to Energy <code>[alt + e]</code></li>
                            <li>to Pok√©mon <code>[alt + p]</code></li>
                        </ul>
                    </ul>
                </div>
                <div class="keybind-column">
                    <h1>General</h1>
                    <ul>
                        <li>Set up <code>[alt + n]</code></li>
                        <li>Reset <code>[alt + r]</code></li>
                        <li>Start turn <code>[alt + t]</code></li>
                        <li>Flip coin <code>[f]</code></li>
                        <li>Flip board <code>[alt + f]</code></li>
                        <li>Announce mulligan <code>[m]</code></li>
                        <li>Undo <code>[u]</code></li>
                        <li>Close popups <code>[esc]</code></li>
                        <li>Refresh images <code>[r]</code></li>
                    </ul>
                </div>
            </div>
        </div>
        <div style="position: absolute; bottom: 0; left: 20px;">
            <p style="font-size: 1.5vh;"><strong>For macOS:</strong> Use <code>option</code> instead of <code>alt</code>
            </p>
        </div>
    </div>

    <table id="decklistTable">
        <thead>
            <tr>
                <th>QTY</th>
                <th>Name</th>
                <th>Type</th>
                <th>URL</th>
            </tr>
        </thead>
        <tbody>
        </tbody>
    </table>

    <table id="selfCurrentDecklistTable" style="display: none;"></table>
    <table id="oppCurrentDecklistTable" style="display: none;"></table>

    <!-- Home page -->
    <div id="videoContainer"></div>
    <%- include('partials/changelog') %>
</body>

</html>
