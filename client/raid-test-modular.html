<!DOCTYPE html>
<!--
===================================================================
File: client/raid-test-modular.html
Purpose: Clean, modular PTCG Raid System client interface
Version: 2.0.0
Author: PTCG Sim Meta Team

Description:
  Modular implementation of the PTCG Raid Battle System with proper
  separation of concerns. Uses external CSS and JS files for
  maintainability and scalability.

Dependencies:
  - css/raid-launcher.css
  - css/raid-game.css  
  - css/raid-components.css
  - css/raid-animations.css
  - js/raid-main.js
  - Socket.IO client library
  - ES6 module support

Used By:
  - Development and testing
  - Future integration into main simulator

Changelog:
  v2.0.0 - Complete modular restructure
  v1.x.x - Legacy inline implementation

Notes:
  - All styles are externalized to CSS files
  - All logic is externalized to JS modules
  - HTML contains only structure and content
  - Easy to extend and maintain
===================================================================
-->
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="PTCG Raid Battle System - Modular client interface">
    <meta name="keywords" content="pokemon, tcg, raid, battle, simulator">
    <meta name="author" content="PTCG Sim Meta Team">
    
    <title>PTCG Raid System v2.0 - Modular Edition</title>
    
    <!-- ===== EXTERNAL STYLESHEETS ===== -->
    <link rel="stylesheet" href="css/raid-launcher.css">
    <link rel="stylesheet" href="css/raid-game.css">
    <link rel="stylesheet" href="css/raid-components.css">
    <link rel="stylesheet" href="css/raid-animations.css">
    
    <!-- ===== FAVICON (Optional) ===== -->
    <!-- <link rel="icon" href="favicon.ico" type="image/x-icon"> -->
    
    <!-- ===== META TAGS FOR PERFORMANCE ===== -->
    <meta name="theme-color" content="#3498db">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
</head>

<body>
    <!-- ========================================
         LAUNCHER INTERFACE
         Primary interface for creating/joining raids
    ========================================= -->
    <div id="raidLauncher" class="raid-launcher">
        <!-- Header Section -->
        <header class="launcher-header">
            <h1>🏴‍☠️ PTCG Raid Battle System</h1>
            <div class="version">Version 2.0.0 - Modular Edition</div>
        </header>
        
        <!-- Session Display (Dynamically added by JS) -->
        <!-- This will be created by RaidUIController.createSessionDisplay() -->
        
        <!-- Main Actions -->
        <section class="button-group">
            <button class="raid-button create-raid" id="createRaidBtn" type="button">
                Create New Raid
            </button>
            <button class="raid-button join-raid" id="joinRaidBtn" type="button">
                Join Existing Raid
            </button>
        </section>

        <!-- Input Fields -->
        <section class="input-section">
            <input 
                type="text" 
                class="raid-input" 
                id="raidIdInput" 
                placeholder="Enter Raid ID to join"
                maxlength="20"
                autocomplete="off"
            >
            <input 
                type="text" 
                class="raid-input" 
                id="usernameInput" 
                placeholder="Your username" 
                value="TestPlayer123"
                maxlength="20"
                autocomplete="username"
            >
        </section>

        <!-- Layout and Test Controls -->
        <section class="button-group">
            <button class="raid-button layout-toggle" id="launcherToggleLayoutBtn" type="button">
                Layout: <span id="launcherCurrentLayoutSpan">versus</span>
            </button>
            <button class="raid-button test-button" id="testMultiplayerBtn" type="button">
                🧪 Test Multiplayer
            </button>
        </section>

        <!-- Quick Test Actions -->
        <section class="button-group">
            <button class="raid-button test-button" id="quickTestBtn" type="button">
                ⚡ Quick Test
            </button>
            <button class="raid-button test-button" id="stressTestBtn" type="button">
                🔥 Stress Test
            </button>
        </section>

        <!-- Status Log -->
        <section class="raid-status" id="raidStatusLog" role="log" aria-live="polite">
            <div>🚀 PTCG Raid System Ready</div>
            <div>⚠️ Status: <span id="connectionStatusDisplay">Initializing...</span></div>
        </section>
    </div>

    <!-- ========================================
         GAME INTERFACE
         Main game view with raid table and controls
    ========================================= -->
    <div id="raidContainer" class="raid-container">
        <div id="raidTable" class="raid-table">
            <!-- Turn Indicator -->
            <div id="turnIndicatorContainer" class="turn-indicator-container"></div>
            
            <!-- Layout Indicator -->
            <div id="layoutIndicatorGfx" class="layout-indicator-gfx">
                Layout: <span id="layoutNameDisplay">Versus</span>
            </div>
            
            <!-- Players Container -->
            <div id="raidPlayersContainer" class="raid-players-container"></div>
            
            <!-- Boss Display -->
            <div id="raidBossDisplay" class="raid-boss">
                <div style="text-align: center;">
                    <div id="bossNameDisplay">RAID BOSS</div>
                    <div class="boss-hp-bar">
                        <div class="boss-hp-fill" style="width: 100%;"></div>
                    </div>
                    <div id="bossHPDisplay">HP: 1000 / 1000</div>
                </div>
            </div>
        </div>
    </div>

    <!-- ========================================
         GAME CONTROLS
         Control panel for raid management
    ========================================= -->
    <aside id="raidControls" class="raid-controls" role="complementary">
        <header class="control-header">
            <h3>🎮 Raid Controls</h3>
            <button id="toggleDebugPanelBtn" class="icon-btn" title="Debug (Shift+F12)" type="button">
                🐞
            </button>
        </header>
        
        <div class="control-info">
            <div>Raid ID: <strong id="controlRaidId">-</strong></div>
            <div>Players: <strong id="controlPlayerCount">0/4</strong></div>
            <div>Layout: <strong id="controlLayoutDisplay">versus</strong></div>
            <div>Your Angle: <strong id="controlYourAngle">-</strong>°</div>
            <div>Phase: <strong id="controlRaidPhase">Lobby</strong></div>
        </div>
        
        <button class="control-button" id="controlsSwitchLayoutBtn" type="button">
            Switch Layout
        </button>
        <button class="control-button" id="leaveRaidBtn" type="button">
            Leave Raid
        </button>
    </aside>

    <!-- ========================================
         GAME ACTIONS
         Action buttons for gameplay
    ========================================= -->
    <div id="gameActions" class="game-actions" role="toolbar">
        <button class="action-btn attack" id="attackBtn" type="button">
            ⚔️ Attack (60)
        </button>
        <button class="action-btn" id="useItemBtn" disabled type="button">
            🎒 Use Item
        </button>
        <button class="action-btn cheer" id="cheerBtn" disabled type="button">
            ✨ Cheer
        </button>
        <button class="action-btn retreat" id="retreatBtn" disabled type="button">
            🔄 Retreat
        </button>
        <button class="action-btn" id="passTurnBtn" disabled type="button">
            ⏭️ Pass Turn
        </button>
        <button class="action-btn debug" id="testKOBtn" type="button">
            💀 Test KO
        </button>
    </div>

    <!-- ========================================
         GAME LOG
         Scrollable log of game events
    ========================================= -->
    <aside id="gameLogContainer" class="game-log-container" role="log" aria-live="polite">
        <header class="game-log-header">
            <h4>📜 Game Log</h4>
            <button class="icon-btn" onclick="this.parentElement.parentElement.style.display='none'" type="button">
                ✕
            </button>
        </header>
        
        <nav class="game-log-tabs">
            <button class="log-tab-btn active" data-tab="all" type="button">All</button>
            <button class="log-tab-btn" data-tab="actions" type="button">Actions</button>
            <button class="log-tab-btn" data-tab="debug" type="button">Debug</button>
            <button class="log-tab-btn" data-tab="errors" type="button">Errors</button>
        </nav>
        
        <div class="game-log-content" id="gameLogContent"></div>
    </aside>

    <!-- ========================================
         SPECTATOR LIST
         List of players watching the raid
    ========================================= -->
    <aside id="spectatorList" class="spectator-list" role="complementary">
        <header class="spectator-header">
            👁️ Spectators (<span id="spectatorCount">0</span>)
        </header>
        <div id="spectatorListContent"></div>
    </aside>

    <!-- ========================================
         DEBUG PANEL
         Development and testing utilities
    ========================================= -->
    <div id="debugPanel" class="debug-panel" role="dialog" aria-labelledby="debug-panel-title">
        <header class="debug-header">
            <h4 id="debug-panel-title">🐞 Debug Panel</h4>
            <button id="closeDebugBtn" class="icon-btn" type="button">✕</button>
        </header>
        
        <div class="debug-content">
            <h5>Client Core State:</h5>
            <pre id="debugClientCoreState">{}</pre>
            
            <h5>UI Controller State:</h5>
            <pre id="debugUiControllerState">{}</pre>
            
            <h5>Last Full Raid State:</h5>
            <pre id="debugLastRaidState">{}</pre>
            
            <h5>Recent Errors:</h5>
            <pre id="debugRecentErrors">[]</pre>
        </div>
        
        <div class="debug-controls">
            <h5>Debug Controls:</h5>
            
            <div class="debug-control-group">
                <label for="debugBossHP">Set Boss HP:</label>
                <input type="number" id="debugBossHP" min="0" max="1000" value="1000">
                <button class="control-button" onclick="raidClient.clientCore.sendRaidAction('debugSetHP', {target: 'boss', value: parseInt(document.getElementById('debugBossHP').value)})" type="button">
                    Set
                </button>
            </div>
            
            <div class="debug-control-group">
                <label for="debugPlayerSelect">Set Player HP:</label>
                <select id="debugPlayerSelect"></select>
                <input type="number" id="debugPlayerHP" min="0" max="200" value="120">
                <button class="control-button" onclick="raidClient.clientCore.sendRaidAction('debugSetHP', {target: 'player-' + document.getElementById('debugPlayerSelect').value, value: parseInt(document.getElementById('debugPlayerHP').value)})" type="button">
                    Set
                </button>
            </div>
            
            <div class="debug-control-group">
                <button class="control-button" onclick="raidClient.clientCore.sendRaidAction('forceNextTurn', {})" type="button">
                    Force Next Turn
                </button>
                <button class="control-button" onclick="raidClient.clientCore.socket.emit('toggleDebug', {raidId: raidClient.clientCore.currentRaidId})" type="button">
                    Toggle Server Debug
                </button>
            </div>
        </div>
    </div>

    <!-- ========================================
         NOTIFICATION CONTAINER
         Toast notifications (Created by JS)
    ========================================= -->
    <!-- Notification container will be created dynamically by RaidUIController -->

    <!-- ========================================
         SCRIPTS
         External JavaScript dependencies and modules
    ========================================= -->
    
    <!-- Socket.IO Client Library -->
    <script src="/socket.io/socket.io.js"></script>
    
    <!-- Main Application Module -->
    <script type="module" src="js/raid-main.js"></script>

    <!-- ========================================
         FALLBACK CONTENT
         Content shown when JavaScript is disabled
    ========================================= -->
    <noscript>
        <div style="
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.9);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 9999;
            text-align: center;
            font-family: Arial, sans-serif;
        ">
            <div>
                <h1>JavaScript Required</h1>
                <p>This application requires JavaScript to function properly.</p>
                <p>Please enable JavaScript in your browser and reload the page.</p>
            </div>
        </div>
    </noscript>
</body>
</html>

<!--
===================================================================
END OF FILE: client/raid-test-modular.html

Future Integration Notes:
- This modular structure can be easily integrated into the main simulator
- CSS files can be combined/minified for production
- JS modules can be bundled using webpack/rollup
- HTML structure can be componentized using React/Vue/Angular
- API endpoints can be easily changed for different backends

Accessibility Features:
- Proper ARIA labels and roles
- Semantic HTML structure  
- Keyboard navigation support
- Screen reader compatibility
- High contrast support

Performance Optimizations:
- External CSS/JS for caching
- Modular loading for faster initial render
- Minimal inline styles/scripts
- Efficient DOM structure
===================================================================
--> 